# name: test/sql/httpfs_timeout_retry.test
# description: test httpfs_timeout_retry extension with CSV operations
# group: [sql]

require httpfs_timeout_retry

query I
SELECT COUNT(*) FROM read_csv_auto('https://raw.githubusercontent.com/dentiny/duck-read-cache-fs/refs/heads/main/test/data/stock-exchanges.csv');
----
251

# Test reading CSV with custom timeout settings
statement ok
SET httpfs_timeout_open = 60000;
SET httpfs_timeout_read = 120000;
SET httpfs_retries_open = 5;
SET httpfs_retries_read = 3;

query I
SELECT COUNT(*) FROM read_csv_auto('https://raw.githubusercontent.com/dentiny/duck-read-cache-fs/refs/heads/main/test/data/stock-exchanges.csv');
----
251

